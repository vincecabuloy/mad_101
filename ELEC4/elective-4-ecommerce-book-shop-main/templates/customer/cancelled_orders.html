{% extends "layout/base_user.html" %} {% block content %}
<div class="container mt-5">
  <div class="mb-4">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="{{ url_for('customer.my_orders') }}">My Orders</a>
        </li>
        <li class="breadcrumb-item active">Cancelled Orders</li>
      </ol>
    </nav>
    <h2 class="mb-0 text-danger">
      <i class="bi bi-x-circle me-2"></i> Cancellation History
    </h2>
  </div>

  {% if orders %}
  <div class="card shadow-sm border-0">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="bg-light text-muted small text-uppercase">
          <tr>
            <th class="ps-4">Order ID</th>
            <th>Date</th>
            <th>Refund Amount</th>
            <th>Status</th>
            <th>Reason for Cancellation</th>
          </tr>
        </thead>
        <tbody>
          {% for order in orders %}
          <tr class="opacity-75">
            <td class="ps-4">
              <span class="fw-bold text-muted">#ORD-{{ order.order_id }}</span>
            </td>
            <td class="small">{{ order.order_date.strftime('%b %d, %Y') }}</td>
            <td>
              <span class="text-dark"
                >â‚±{{ "%.2f"|format(order.total_amount) }}</span
              >
            </td>
            <td>
              <span
                class="badge {% if order.status == 'Cancelled' %}bg-secondary{% else %}bg-danger{% endif %} px-3"
              >
                {{ order.status }}
              </span>
            </td>
            <td>
              <div class="text-muted small italic">
                <i class="bi bi-info-circle me-1"></i> {{ order.decline_reason
                or 'No reason provided' }}
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% else %}
  <div class="text-center py-5 border rounded bg-white shadow-sm">
    <i class="bi bi-check-circle text-success" style="font-size: 4rem"></i>
    <h4 class="mt-3">No cancelled orders found.</h4>
    <p class="text-muted">All your orders are currently active or completed!</p>
    <a
      href="{{ url_for('customer.my_orders') }}"
      class="btn btn-outline-primary px-4 mt-2"
      >Back to Active Orders</a
    >
  </div>
  {% endif %}
</div>
{% endblock %}
